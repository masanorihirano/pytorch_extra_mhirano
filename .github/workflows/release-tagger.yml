name: Release tagging
on:
 pull_request:
   branches:
     - main
   types:
     - closed
jobs:
 main:
   runs-on: ubuntu-latest
   if: github.event.pull_request.merged == true && startsWith(github.event.pull_request.head.ref, 'release/')
   steps:
      - name: Get the version
        id: get_version
        run: |
          echo $SOURCE_VERSION | cut -d / -f 2
        env:
          SOURCE_VERSION: ${{ github.event.pull_request.head.ref }}
      - name: Echo tag
        run: echo ${{ steps.get_version.outputs.VERSION }}
      - name: Tag commit
        uses: tvdias/github-tagger@v0.0.1
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          tag: ${{ steps.get_version.outputs.VERSION }}
